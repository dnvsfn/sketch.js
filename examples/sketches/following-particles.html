<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>2011-08-16 A</title>
<link rel="stylesheet" href="/stylesheets/style.css">
<script src="sketch.js"></script>
<script src="/javascripts/images.js"></script>
</head>
<body>
<canvas></canvas>
<script type="text/javascript">
Sketch.create(function(){
	
	var PARTICLE_COUNT = 100,
		particles = [];
	
	var Particle = function (location) {
		
		this.location = location;
		this.velocity = new Point();
		this.acceleration = new Point();
		this.direction = null;
	};
	
	Particle.prototype = {
		update: function () {
			
			var direction = Point.sub($c.mouse, this.location);
			direction.normalize();
			direction.mult(0.5);
			this.acceleration.add(direction);
			
			this.velocity.add(this.acceleration);
			this.location.add(this.velocity);
			
			this.acceleration = new Point();
			this.velocity.limit(10);
		},
		draw: function () {
			fill('black');
			circle(this.location, 1.5);
		},
		bounds: function () {
			var l = this.location,
				s = this.size;
			
			if (l.x > $c.WIDTH) {
				l.x = 0;
			} else if (l.x < 0) {
				l.x = $c.WIDTH;
			}
			if (l.y > $c.HEIGHT) {
				l.y = 0; 
			} else if (l.y < 0) {
				l.y = $c.HEIGHT;
			}
		},
		run: function () {
			this.bounds();
			this.update();
			this.draw();
		}
	};
	
	function setup () {
		
		stroke(false);
		
		for (var i=0; i < PARTICLE_COUNT; i++) {
			var loc = new Point(Math.random() * $c.WIDTH, Math.random() * $c.WIDTH);
			var p = new Particle(loc);
			particles.push(p);
		};
		
		$c.clear_screen = false;
		
	};

	 function draw(){
		
		background('rgba(255,255,255,0.07)');
		
		for (var i=0; i < particles.length; i++) {
			var p = particles[i];
			p.run();
		};
	 }
	
	Sketch.run(setup, draw);

});
</script>
</body>
</html>
