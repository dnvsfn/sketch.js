<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>2011-08-29 B</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
  <script src="sketch.js"></script>
</head>
<body>
<canvas></canvas>
<script type="text/javascript">
Sketch.create(function () { 
	
	text.baseline = 'middle';
	text.align = 'center';
	
	console.log('$c.context.textBaseline = ' + $c.context.textBaseline);
	
	var TextParticle = Particle.extend({
		setup: function () {
			console.log('setup() TextParticle at ' + this.location + ' with "' + this.text + '" as text.');
		},
		update: function () {
			var acc = Point.random(-0.6, 0.6);
			
			// var acc = new Point(
			// 	Math.cos($c.frame/100),
			// 	Math.sin($c.frame/100)
			// );
			
			this.velocity.add(acc);
			this.location.add(this.velocity);
			
			if (this.velocity.mag() > 5) {
				this.velocity = Point();
			}
		},
		draw: function () {
			fill('white');
			stroke('black');
			circle(this.location, this.radius);
			
			fill('black');
			font('bold 42px sans-serif');
			text(this.text, this.location);
		}
	});
	
	// var t = new TextParticle({
	// 	location: Point.random(),
	// 	text: '?',
	// 	radius: 50
	// });
	// 
	// t.run();d
	
	var text_particles = [];
	
	$c.keydown(function (){
		if (this.key.length === 1) {
			var p = Point.random();
			var tp = new TextParticle({
				location: p,
				text: this.key,
				radius: 30
			});
		
			text_particles.push(tp);
		}
	});
	
	$c.clear_screen = false;
	
	$c.play(function () {
		
		background('rgba(255,255,255,0.05)');
		
		if ($c.frame < 1) {
			fill('lightgray');
			font('bold 54px sans-serif');
			text('press a key', $c.center);
		}
		
		for (var i=0; i < text_particles.length; i++) {
			var tp = text_particles[i];
			
			tp.run();
		};
		
	});
	
});
</script>
</body>
</html>
