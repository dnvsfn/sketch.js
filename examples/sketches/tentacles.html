<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>2011-08-27 A</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
  <script src="sketch.js"></script>
</head>
<body>
<canvas></canvas>
<script type="text/javascript">
Sketch.create(function () { 
	
	var Orb = Particle.extend({
		update: function () {
			var acc = Point.random(-1,1);
			this.velocity.add(acc);
			this.location.add(this.velocity);
			this.velocity.limit(10);
			
			if (this.radius < 1) {
				this.removed = true;
			} else {
				this.radius -= 0.2;
			}
		},
		draw: function () {
			// var color = 'rgba('+random(255,0)+','+random(255,0)+','+random(255,0)+',255)';
			// console.log(color);
			fill(this.color);
			stroke('black');
			strokeSize(2);
			// console.log(this.radius);
			circle(this.location, this.radius);
		},
		run: function () {
			if (this.removed==false) {
				// console.log('run()');
				this.checkBounds();
				this.update();
				this.draw();
			}
		}
	});
	
	// var o = new Orb({
	// 	location: $c.center, 
	// 	velocity: new Point(),
	// 	radius: 20
	// });
	
	var orbs = [];
	
	// o.run();
	
	$c.mouseDown(function(){
		// console.log('mouse down: ' + $c.mouse);
	});
	
	$c.mouseUp(function(){
		// console.log('mouse up: ' + $c.mouse + ' | dragging: ' + $c.dragging);
	});
	
	$c.mouseMove(function (){
		// console.log($c.dragging);
	});
	
	$c.mouseDrag(function(){
		orbs.push(new Orb({
			location: $c.mouse, 
			velocity: new Point(),
			radius: 20,
			removed: false,
			color: 'rgba('+random(255,0)+','+random(255,0)+','+random(255,0)+',255)'
		}));
	});
	
	$c.clear_screen = false;
	
	$c.play(function () {
		
		background('rgba(255,255,255,0.01)');
		
		for (var i=0; i < orbs.length; i++) {
			var o = orbs[i];
			o.run();
		};
		
	});
	
});
</script>
</body>
</html>
